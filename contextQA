<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•¸ä½é™·é˜±æ±‚ç”Ÿè¨˜ (10å¹•æ“´å……ç‰ˆ)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.7.77/Tone.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #0f172a; color: #e2e8f0; overflow: hidden; }
        .container-box { background-color: #1e293b; border: 1px solid #334155; }
        .screen { transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; }
        .screen.hidden { opacity: 0; transform: scale(0.95); pointer-events: none; position: absolute; }
        .choice-btn { transition: all 0.2s ease-in-out; }
        .choice-btn:hover { transform: scale(1.03); background-color: #334155; box-shadow: 0 0 15px rgba(30, 41, 59, 0.5); }
        .flash-success { animation: flash-success 0.7s ease-out; }
        .flash-danger { animation: flash-danger 0.7s ease-out; }
        @keyframes flash-success { 0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); } 50% { box-shadow: 0 0 30px 10px rgba(34, 197, 94, 0.5); } }
        @keyframes flash-danger { 0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } 50% { box-shadow: 0 0 30px 10px rgba(239, 68, 68, 0.5); } }
        .result-icon, .feedback-icon { animation: pop-in 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55); }
        @keyframes pop-in { 0% { transform: scale(0); } 100% { transform: scale(1); } }
        #feedback-modal { transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; }
        #feedback-modal.hidden { opacity: 0; transform: scale(1.1); pointer-events: none; }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div id="app-container" class="w-full max-w-2xl mx-auto relative">

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="screen container-box p-8 rounded-2xl text-center shadow-2xl">
            <h1 class="text-4xl font-black text-cyan-300 mb-4">æ•¸ä½é™·é˜±æ±‚ç”Ÿè¨˜</h1>
            <p class="text-slate-300 mb-8">ä½ åœ¨ç¶²è·¯ä¸–ç•Œçš„æ¯å€‹é¸æ“‡ï¼Œéƒ½å¯èƒ½å°å‘ä¸åŒçš„å‘½é‹ã€‚<br>æº–å‚™å¥½è¿æ¥æŒ‘æˆ°äº†å—ï¼Ÿ</p>
            <button id="start-btn" class="w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-4 px-6 rounded-lg text-lg shadow-lg transition-transform transform hover:scale-105">é–‹å§‹æŒ‘æˆ°</button>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="screen hidden container-box p-8 rounded-2xl shadow-2xl w-full">
            <div id="story-text" class="prose prose-invert prose-lg mb-8 bg-slate-800/50 p-6 rounded-md min-h-[150px]"></div>
            <div id="choices-container" class="grid grid-cols-1 gap-4"></div>
        </div>

        <!-- Result Screen -->
        <div id="result-screen" class="screen hidden container-box p-8 rounded-2xl shadow-2xl text-center w-full">
            <div id="result-icon" class="text-8xl mb-4"></div>
            <h2 id="result-title" class="text-4xl font-black mb-4"></h2>
            <div id="result-content" class="text-slate-300 text-lg mb-8"></div>
            <button id="restart-btn" class="w-full bg-amber-500 hover:bg-amber-600 text-slate-900 font-bold py-3 px-6 rounded-lg text-lg">é‡æ–°æŒ‘æˆ°ä¸€æ¬¡</button>
        </div>
    </div>
    
    <!-- Feedback Modal -->
    <div id="feedback-modal" class="hidden fixed inset-0 bg-black/70 flex items-center justify-center p-4">
        <div class="container-box w-full max-w-md mx-auto p-6 rounded-2xl text-center">
            <div id="feedback-icon" class="text-6xl mb-4"></div>
            <h3 id="feedback-title" class="text-2xl font-bold mb-3"></h3>
            <p id="feedback-text" class="text-slate-300 mb-6"></p>
            <button id="feedback-continue-btn" class="w-full bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-3 px-5 rounded-lg">ç¹¼çºŒ</button>
        </div>
    </div>

    <script>
        const gameData = {
            scenes: {
                start: {
                    text: `<h3>ç¬¬ä¸€å¹•ï¼šèµ·é»</h3><p>æš‘å‡ä¾†äº†ï¼Œä½ åœ¨ç¶²è·¯ä¸Šè¦åšä»€éº¼ï¼Ÿ</p>`,
                    choices: {
                        job: { text: 'æ‰¾å€‹è¼•é¬†çš„æ‰“å·¥è³ºé›¶ç”¨éŒ¢ã€‚', nextScene: 'job_ad', feedback: { type: 'neutral', title: 'æŒ‘æˆ°é–‹å§‹', text: 'æƒ³é è‡ªå·±è³ºéŒ¢æ˜¯å¥½äº‹ï¼Œä½†ç¶²è·¯ä¸Šçš„å·¥ä½œæ©Ÿæœƒå……æ»¿äº†æœªçŸ¥æ•¸...' }},
                        ticket: { text: 'å¶åƒè¦é–‹æ¼”å”±æœƒï¼Œæ¶ç¥¨ï¼', nextScene: 'ticket_soldout', feedback: { type: 'neutral', title: 'æŒ‘æˆ°é–‹å§‹', text: 'å°å¶åƒçš„ç†±æ„›ï¼Œæœ‰æ™‚æœƒè®“æˆ‘å€‘å¿½ç•¥å±éšª...' }},
                        game: { text: 'è³£æ‰ç·´äº†å¾ˆä¹…çš„éŠæˆ²å¸³è™Ÿã€‚', nextScene: 'game_sell', feedback: { type: 'neutral', title: 'æŒ‘æˆ°é–‹å§‹', text: 'è™›æ“¬ä¸–ç•Œçš„äº¤æ˜“ï¼Œè¦å‰‡å’Œç¾å¯¦ä¸–ç•Œä¸€æ¨£åš´é…·...' }},
                        dating: { text: 'è©¦è©¦çœ‹äº¤å‹è»Ÿé«”ï¼Œèªè­˜æ–°æœ‹å‹ã€‚', nextScene: 'dating_match', feedback: { type: 'neutral', title: 'æŒ‘æˆ°é–‹å§‹', text: 'åœ¨å°‹æ±‚é€£çµçš„åŒæ™‚ï¼Œä¹Ÿè¦å°å¿ƒè™›å‡çš„é¢å…·...' }}
                    }
                },
                // --- Job Scam Path ---
                job_ad: {
                    text: `<h3>ç¬¬äºŒå¹•ï¼šé«˜è–ªèª˜æƒ‘</h3><p>ä½ åœ¨ç¤¾åœ˜æ»‘åˆ°ä¸€å‰‡å»£å‘Šï¼šã€Œèª å¾µé ˜éŒ¢å°ˆå“¡ï¼Œæ—¥è–ªä¸‰åƒï¼Œç¾é ˜ã€ã€‚çœ‹èµ·ä¾†å¥½åˆ°ä¸çœŸå¯¦ï¼Œä½†ä½ åˆæœ‰é»å¿ƒå‹•...</p>`,
                    choices: {
                        inquire: { text: 'ç§è¨Šå•çœ‹çœ‹ï¼Œå¤šäº†è§£ç¸½æ²’å£è™•ã€‚', nextScene: 'job_contact', feedback: { type: 'danger', title: 'âš ï¸ é¢¨éšªä¹‹å§‹', text: 'å¥½å¥‡å¿ƒæ˜¯æ­£å¸¸çš„ï¼Œä½†ä¸»å‹•æ¥è§¸é€™ç¨®é«˜é¢¨éšªå»£å‘Šï¼Œå°±ç­‰æ–¼å°‡è‡ªå·±æš´éœ²åœ¨è©é¨™é›†åœ˜çš„ç‹©çµç¯„åœå…§ã€‚' }},
                        ignore: { text: 'å¤ªå¯ç–‘äº†ï¼Œç›´æ¥å¿½ç•¥ã€‚', nextScene: 'end_safe_job', feedback: { type: 'success', title: 'âœ… æ˜æ™ºçš„å¿½ç•¥', text: 'ä½ æ‡‰ç”¨äº†ã€Œè³ªç–‘ã€çš„é»ƒé‡‘æ³•å‰‡ã€‚å°æ–¼ä»»ä½•ã€Œé«˜è–ªã€è¼•é¬†ã€çš„å·¥ä½œæŠ±æŒæ‡·ç–‘ï¼Œæ˜¯ä¿è­·è‡ªå·±çš„ç¬¬ä¸€æ­¥ã€‚' }}
                    }
                },
                job_contact: {
                    text: `<h3>ç¬¬ä¸‰å¹•ï¼šæ¥è§¸</h3><p>ä¸€ä½è‡ªç¨±ã€Œå®ä¿Šå“¥ã€çš„äººç§’å›ï¼Œä»–å£æ°£å°ˆæ¥­ï¼Œèªªæ˜¯å¹«é›»å•†è™•ç†å¸³å‹™ï¼Œé‚€è«‹ä½ æ˜å¤©åœ¨ä¾¿åˆ©å•†åº—è¦‹é¢è©³è«‡ã€‚</p>`,
                    choices: {
                        meet: { text: 'åªæ˜¯è¦‹é¢èŠèŠï¼Œæ‡‰è©²é‚„å¥½ï¼Œå»çœ‹çœ‹ã€‚', nextScene: 'job_task', feedback: { type: 'danger', title: 'âš ï¸ é¢¨éšªå‡ç´š', text: 'èˆ‡é™Œç”Ÿç¶²å‹è¦‹é¢æœ¬èº«å°±æœ‰é¢¨éšªï¼Œæ›´ä½•æ³æ˜¯ä¾†æºå¯ç–‘çš„æ‰“å·¥ã€‚å°æ–¹æ­£åœ¨èª˜ä½¿ä½ é›¢é–‹å®‰å…¨çš„ç¶²è·¯ï¼Œé€²å…¥å¯¦é«”é™·é˜±ã€‚' }},
                        ask: { text: 'è¦æ±‚å°æ–¹æä¾›å…¬å¸çµ±ç·¨ï¼Œå¦å‰‡ä¸å»ã€‚', nextScene: 'end_safe_job_2', feedback: { type: 'success', title: 'âœ… æ¼‚äº®çš„æŸ¥è­‰', text: 'ä½ æ‡‰ç”¨äº†ã€ŒæŸ¥è­‰ã€çš„é»ƒé‡‘æ³•å‰‡ã€‚è¦æ±‚æä¾›å¯é©—è­‰çš„å…¬å¸è³‡è¨Šï¼Œæ˜¯æˆ³ç ´é¨™å±€çš„æœ‰æ•ˆæ–¹æ³•ã€‚å°æ–¹é€šå¸¸æœƒåœ¨æ­¤æ™‚æ¶ˆå¤±ã€‚' }}
                    }
                },
                job_task: {
                    text: `<h3>ç¬¬å››å¹•ï¼šä»»å‹™</h3><p>åœ¨ä¾¿åˆ©å•†åº—ï¼Œå®ä¿Šå“¥äº¤çµ¦ä½ ä¸€å¼µææ¬¾å¡å’Œå¯†ç¢¼ï¼Œä»–èªªï¼šã€Œé€™æ˜¯å» å•†çš„è²¨æ¬¾ï¼Œä½ å¹«æˆ‘é ˜å‡ºä¾†å°±å¥½ã€‚ã€ä»–çœ‹èµ·ä¾†å¾ˆèª æ‡‡ï¼Œä¸åƒå£äººã€‚</p>`,
                    choices: {
                        withdraw: { text: 'åªæ˜¯å¹«å¿™é ˜éŒ¢è€Œå·²...ç…§åšã€‚', nextScene: 'end_danger_job', feedback: { type: 'danger', title: 'ğŸš¨ è‡´å‘½çš„é¸æ“‡ï¼', text: 'é€™æ˜¯æˆç‚ºè©é¨™é›†åœ˜ã€Œè»Šæ‰‹ã€çš„è‡´å‘½ä¸€æ­¥ï¼ä½ å³å°‡ç¶“æ‰‹è´“æ¬¾ï¼Œé¢è‡¨ç„¡æ³•æŒ½å›çš„æ³•å¾‹å¾Œæœã€‚' }},
                        refuse: { text: 'ç”¨åˆ¥äººçš„å¡é ˜éŒ¢å¤ªå¥‡æ€ªäº†ï¼Œæœæ–·æ‹’çµ•ã€‚', nextScene: 'end_safe_job_3', feedback: { type: 'success', title: 'ğŸ‰ æˆåŠŸå®ˆä½åº•ç·šï¼', text: 'ä½ æ‡‰ç”¨äº†æ±‚è·é˜²é¨™ã€Œä¸‰ä¸ã€åŸå‰‡ï¼çµ•ä¸ç¶“æ‰‹ä¾†è·¯ä¸æ˜çš„é‡‘èå·¥å…·ï¼Œæ˜¯é¿å…æˆç‚ºè»Šæ‰‹çš„æœ€é‡è¦é—œéµã€‚' }}
                    }
                },
                // --- Ticket Scam Path ---
                ticket_soldout: {
                    text: `<h3>ç¬¬äº”å¹•ï¼šä¸€ç¥¨é›£æ±‚</h3><p>ä½ æœ€æ„›çš„å¶åƒæ¼”å”±æœƒé–€ç¥¨ç§’æ®º... å¿ƒç¢çš„ä½ åœ¨ç²‰çµ²ç¤¾åœ˜çœ‹åˆ°ä¸€å‰‡è²¼æ–‡ï¼šã€Œä½›å¿ƒåŸåƒ¹è®“ç¥¨ä¸€å¼µï¼ã€</p>`,
                     choices: {
                        dm: { text: 'ç«‹åˆ»ç§è¨Šï¼é€™æ˜¯æˆ‘çš„å¸Œæœ›ï¼', nextScene: 'ticket_contact', feedback: { type: 'danger', title: 'âš ï¸ è¸å…¥é™·é˜±', text: 'åœ¨æ¸´æœ›èˆ‡éŒ¯å¤±ææ‡¼(FOMO)çš„é©…ä½¿ä¸‹ï¼Œä½ é€²å…¥äº†é¨™å­é è¨­å¥½çš„ç‹©çµå ´ã€‚' }},
                        official: { text: 'åªç›¸ä¿¡å®˜æ–¹è½‰å”®å¹³å°ï¼Œå†ç­‰ç­‰çœ‹ã€‚', nextScene: 'end_safe_ticket', feedback: { type: 'success', title: 'âœ… ç†æ€§çš„é¸æ“‡', text: 'å …æŒå®˜æ–¹ç®¡é“æ˜¯é¿å…é–€ç¥¨è©é¨™æœ€æœ‰æ•ˆçš„æ–¹æ³•ã€‚è€å¿ƒæ˜¯ä½ çš„ç›¾ç‰Œã€‚' }}
                    }
                },
                ticket_contact: {
                    text: `<h3>ç¬¬å…­å¹•ï¼šæ™‚é–“å£“åŠ›</h3><p>è³£å®¶å¾ˆè¦ªåˆ‡ï¼Œä¹Ÿå‚³äº†è³¼ç¥¨è­‰æ˜æˆªåœ–ã€‚ä»–èªªï¼šã€Œå¾ˆå¤šäººåœ¨å•ï¼Œ10åˆ†é˜å…§æ²’åŒ¯æ¬¾å°±è®“çµ¦åˆ¥äººï¼ã€</p>`,
                     choices: {
                        transfer: { text: 'æ™‚é–“ç·Šè¿«ï¼Œé¦¬ä¸Šè½‰å¸³ï¼', nextScene: 'end_danger_ticket', feedback: { type: 'danger', title: 'ğŸš¨ è¡å‹•çš„ä»£åƒ¹', text: 'ã€Œæ€¥è¿«æ€§ã€æ˜¯é¨™å­æœ€æ„›çš„æ­¦å™¨ï¼Œå®ƒè®“ä½ æ²’æ™‚é–“æ€è€ƒã€‚ç›´æ¥åŒ¯æ¬¾ç­‰æ–¼æ”¾æ£„æ‰€æœ‰ä¿éšœã€‚' }},
                        meet: { text: 'å …æŒé¢äº¤æˆ–ä½¿ç”¨æœ‰ä¿éšœçš„å¹³å°äº¤æ˜“ã€‚', nextScene: 'end_safe_ticket_2', feedback: { type: 'success', title: 'âœ… æ¼‚äº®çš„é˜²å®ˆ', text: 'ä»»ä½•æ‹’çµ•å®‰å…¨äº¤æ˜“æ–¹å¼çš„è³£å®¶ï¼Œéƒ½æœ‰æ¥µé«˜çš„è©é¨™å«Œç–‘ã€‚ä½ æˆåŠŸå®ˆä½äº†éŒ¢åŒ…ã€‚' }}
                    }
                },
                // --- Gaming Scam Path ---
                game_sell: {
                    text: `<h3>ç¬¬ä¸ƒå¹•ï¼šé«˜åƒ¹èª˜æƒ‘</h3><p>ä½ åœ¨è«–å£‡è³£å¸³è™Ÿï¼Œä¸€ä½è²·å®¶å‡ºåƒ¹æ¯”ä½ é æœŸçš„é‚„é«˜ã€‚ä»–èªªï¼šã€Œç‚ºç¢ºä¿å¸³è™Ÿæ²’å•é¡Œï¼Œæˆ‘éœ€è¦å…ˆç™»å…¥é©—è²¨ã€‚ã€</p>`,
                    choices: {
                        give_pass: { text: 'è½èµ·ä¾†åˆç†ï¼ŒæŠŠå¸³å¯†çµ¦ä»–ã€‚', nextScene: 'end_danger_game', feedback: { type: 'danger', title: 'ğŸš¨ è‡´å‘½çš„ä¿¡ä»»', text: 'å¸³è™Ÿå¯†ç¢¼å°±æ˜¯ä½ æ•¸ä½è³‡ç”¢çš„é‘°åŒ™ï¼äº¤å‡ºå»çš„ç¬é–“ï¼Œä½ å°±å¤±å»äº†æ‰€æœ‰æ¬Šã€‚' }},
                        use_platform: { text: 'ä¸è¡Œï¼Œæˆ‘å€‘å¿…é ˆé€éæœ‰ä¿éšœçš„äº¤æ˜“å¹³å°ã€‚', nextScene: 'end_safe_game', feedback: { type: 'success', title: 'âœ… å®ˆè­·äº†è³‡ç”¢', text: 'å …æŒä½¿ç”¨å®˜æ–¹æˆ–æœ‰ä¿¡è­½çš„ç¬¬ä¸‰æ–¹å¹³å°ï¼Œæ˜¯ä¿è­·è‡ªå·±è™›æ“¬è²¡ç”¢çš„ä¸äºŒæ³•é–€ã€‚' }}
                    }
                },
                 // --- Dating Scam Path ---
                dating_match: {
                    text: `<h3>ç¬¬å…«å¹•ï¼šå®Œç¾æƒ…äºº</h3><p>ä½ åœ¨äº¤å‹è»Ÿé«”ä¸Šèªè­˜ä¸€ä½å°è±¡ï¼Œæº«æŸ”é«”è²¼ï¼Œå–„è§£äººæ„ï¼Œä½ å€‘èŠäº†ä¸€å€‹æœˆï¼Œæ„Ÿè¦ºå°±åƒéˆé­‚ä¼´ä¾¶ã€‚</p>`,
                    choices: {
                        continue_chat: { text: 'ç¹¼çºŒæ·±å…¥äº†è§£ï¼Œæ„Ÿè¦ºé‡åˆ°å°çš„äººäº†ã€‚', nextScene: 'dating_crisis', feedback: { type: 'neutral', title: 'æƒ…æ„Ÿå‡æº«', text: 'ç¶²è·¯ä¸Šçš„å®Œç¾äººè¨­ï¼Œå¯èƒ½æ˜¯ç²¾å¿ƒè¨­è¨ˆçš„åŠ‡æœ¬ã€‚' }}
                    }
                },
                dating_crisis: {
                    text: `<h3>ç¬¬ä¹å¹•ï¼šçªç™¼å±æ©Ÿ</h3><p>æŸå¤©ï¼Œå°æ–¹çªç„¶èªªå®¶äººæ€¥ç—…ä½é™¢éœ€è¦ç”¨éŒ¢ï¼Œæ‹œè¨—ä½ å¹«å¿™ï¼Œä¸¦æ‰¿è«¾ä¸‹é€±å°±é‚„ã€‚</p>`,
                    choices: {
                        help: { text: 'ä»–é€™éº¼å¯æ†ï¼Œç•¶ç„¶è¦å¹«ï¼', nextScene: 'dating_pressure', feedback: { type: 'danger', title: 'âš ï¸ æƒ…æ„Ÿé™·é˜±', text: 'åˆ©ç”¨ã€ŒåŒæƒ…å¿ƒã€æ˜¯å‡äº¤å‹è©é¨™çš„æ ¸å¿ƒã€‚ä½ å·²ç¶“è¢«é–å®šç‚ºç›®æ¨™ã€‚' }},
                        comfort: { text: 'é—œå¿ƒä»–ï¼Œä½†å§”å©‰è¡¨ç¤ºç„¡æ³•å€ŸéŒ¢ã€‚', nextScene: 'end_safe_dating', feedback: { type: 'success', title: 'âœ… ç†æ€§æˆ°å‹æ„Ÿæ€§', text: 'ã€Œè¦‹é¢å‰è«‡éŒ¢å°±æ˜¯è©é¨™ã€ï¼Œä½ å®ˆä½äº†é€™æ¢æœ€é‡è¦çš„é˜²ç·šï¼Œæ²’æœ‰è¢«åŒæƒ…å¿ƒç¶æ¶ã€‚' }}
                    }
                },
                dating_pressure: {
                    text: `<h3>ç¬¬åå¹•ï¼šæƒ…æ„Ÿå‹’ç´¢</h3><p>ä½ æœ‰äº›çŒ¶è±«ï¼Œå°æ–¹å»èªªï¼šã€Œæˆ‘ä»¥ç‚ºä½ æ˜¯åœ¨ä¹æˆ‘çš„...æ²’æƒ³åˆ°ä½ é€™éº¼ä¸ä¿¡ä»»æˆ‘ï¼ã€</p>`,
                     choices: {
                        surrender: { text: 'æˆ‘ä¸æ˜¯ä¸ä¿¡ä½ ...å¥½å§ï¼Œæˆ‘åŒ¯æ¬¾ã€‚', nextScene: 'end_danger_dating', feedback: { type: 'danger', title: 'ğŸš¨ è¢«æƒ…æ„Ÿç¶æ¶', text: 'é€™æ˜¯å…¸å‹çš„æƒ…æ„Ÿå‹’ç´¢ï¼Œåˆ©ç”¨ä½ çš„ç½ªæƒ¡æ„Ÿé€¼ä½ å°±ç¯„ã€‚ä¸€æ—¦åŒ¯æ¬¾ï¼Œåªæœƒæœ‰ç„¡æ•¸å€‹æ–°çš„è—‰å£ç­‰è‘—ä½ ã€‚' }},
                        stand_firm: { text: 'æˆ‘å¾ˆåœ¨ä¹ä½ ï¼Œä½†çœŸçš„ç„¡æ³•åŒ¯æ¬¾ã€‚', nextScene: 'end_safe_dating', feedback: { type: 'success', title: 'ğŸ‰ æ™è„«äº†æ·é–', text: 'ä½ æˆåŠŸè­˜ç ´äº†æƒ…æ„Ÿå‹’ç´¢ï¼ä¿è­·è‡ªå·±ä¸ä»£è¡¨æ²’æœ‰åŒæƒ…å¿ƒï¼Œé€™æ˜¯æˆç†Ÿçš„è¡¨ç¾ã€‚' }}
                    }
                }
            },
            outcomes: {
                end_safe_job: { title: 'ğŸ‘ é˜²ç¦¦æˆåŠŸï¼', content: '<p>ä½ æˆåŠŸé¿é–‹äº†æ±‚è·é™·é˜±çš„èª˜æƒ‘ï¼ç›´æ¥å¿½ç•¥é«˜é¢¨éšªè¨Šæ¯ï¼Œæ˜¯æœ€å®‰å…¨çš„é˜²å®ˆã€‚</p>' },
                end_safe_job_2: { title: 'ğŸ‘ é˜²ç¦¦æˆåŠŸï¼', content: '<p>ä½ çš„è­¦è¦ºå¿ƒè®“è©é¨™é›†åœ˜ç„¡æ³•å¾—é€ï¼æŸ¥è­‰æ˜¯æˆ³ç ´è¬Šè¨€çš„æœ€ä½³æ­¦å™¨ã€‚</p>' },
                end_safe_job_3: { title: 'ğŸ‰ å®Œç¾å®ˆè­·ï¼', content: '<p>ä½ åœ¨æœ€é—œéµçš„ä¸€æ­¥ï¼Œå®ˆä½äº†åº•ç·šï¼ä½ ä¿ä½äº†è‡ªå·±æ¸…ç™½çš„æœªä¾†ã€‚</p>' },
                end_danger_job: { title: 'â˜ ï¸ æ‰å…¥é™·é˜±ï¼', content: '<p>åœ¨ä½ é ˜å‡ºéŒ¢çš„é‚£ä¸€åˆ»ï¼ŒåŸ‹ä¼çš„è­¦å¯Ÿä¸€æ“è€Œä¸Š...ä½ ï¼Œæˆç‚ºäº†è©é¨™é›†åœ˜çš„ã€Œè»Šæ‰‹ã€ï¼Œå°‡é¢è‡¨åˆ‘è²¬èˆ‡é‰…é¡è³ å„Ÿï¼Œç•™ä¸‹æ°¸ä¹…çš„å‰ç§‘ç´€éŒ„ã€‚</p>' },
                end_safe_ticket: { title: 'ğŸ‘ é˜²ç¦¦æˆåŠŸï¼', content: '<p>ä½ æ²’æœ‰è¢«éŒ¯å¤±ææ‡¼(FOMO)ç¶æ¶ï¼Œå …æŒäº†å®‰å…¨çš„è³¼ç¥¨åŸå‰‡ï¼</p>' },
                end_safe_ticket_2: { title: 'ğŸ‰ å®Œç¾å®ˆè­·ï¼', content: '<p>ä½ è­˜ç ´äº†é¨™å­çš„æ™‚é–“å£“åŠ›è©±è¡“ï¼ŒæˆåŠŸä¿è­·äº†ä½ çš„éŒ¢åŒ…å’Œçœ‹æ¼”å”±æœƒçš„å¥½å¿ƒæƒ…ï¼</p>' },
                end_danger_ticket: { title: 'â˜ ï¸ æ‰å…¥é™·é˜±ï¼', content: '<p>ä½ åŒ¯æ¬¾å¾Œï¼Œå°æ–¹å°±æ¶ˆå¤±äº†ã€‚ä½ ä¸ä½†æå¤±äº†éŒ¢ï¼Œæ›´éŒ¯éäº†å¤¢å¯ä»¥æ±‚çš„æ¼”å”±æœƒã€‚</p>' },
                end_safe_game: { title: 'ğŸ‰ å®Œç¾å®ˆè­·ï¼', content: '<p>ä½ ä¿è­·äº†è‡ªå·±è¾›è‹¦ç·´æˆçš„å¸³è™Ÿï¼åœ¨è™›æ“¬ä¸–ç•Œï¼Œè¦å‰‡å’Œç¾å¯¦ä¸€æ¨£é‡è¦ã€‚</p>' },
                end_danger_game: { title: 'â˜ ï¸ æ‰å…¥é™·é˜±ï¼', content: '<p>å°æ–¹ä¸€ç™»å…¥å°±æ”¹æ‰äº†ä½ çš„å¯†ç¢¼ï¼Œä½ çš„å¿ƒè¡€å…¨éƒ¨åŒ–ç‚ºçƒæœ‰ï¼Œä»–å¾æ­¤æ¶ˆå¤±ã€‚</p>' },
                end_safe_dating: { title: 'ğŸ‰ å®Œç¾å®ˆè­·ï¼', content: '<p>ä½ å®ˆä½äº†æƒ…æ„Ÿå’Œç†æ™ºçš„ç•Œç·šï¼Œæ²’æœ‰è®“è™›å‡çš„æ„›æƒ…å‚·å®³åˆ°ä½ çœŸå¯¦çš„äººç”Ÿã€‚</p>' },
                end_danger_dating: { title: 'â˜ ï¸ æ‰å…¥é™·é˜±ï¼', content: '<p>ä½ åŒ¯å‡ºäº†ç¬¬ä¸€ç­†éŒ¢ï¼Œæ¥ä¸‹ä¾†åªæœƒæœ‰æ›´å¤šçš„è—‰å£å’Œè¬Šè¨€ï¼Œç›´åˆ°ä½ è¢«æ¦¨ä¹¾ç‚ºæ­¢ã€‚é€™å°±æ˜¯æ®˜é…·çš„ã€Œæ®ºè±¬ç›¤ã€ã€‚</p>' }
            }
        };

        const welcomeScreen = document.getElementById('welcome-screen');
        const gameScreen = document.getElementById('game-screen');
        const resultScreen = document.getElementById('result-screen');
        
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');

        const storyText = document.getElementById('story-text');
        const choicesContainer = document.getElementById('choices-container');
        
        const resultIcon = document.getElementById('result-icon');
        const resultTitle = document.getElementById('result-title');
        const resultContent = document.getElementById('result-content');
        
        const appContainer = document.getElementById('app-container');
        
        const feedbackModal = document.getElementById('feedback-modal');
        const feedbackIcon = document.getElementById('feedback-icon');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');
        const feedbackContinueBtn = document.getElementById('feedback-continue-btn');

        let audioStarted = false;
        let synth, successSynth, failureSynth;

        function initializeAudio() {
            if (audioStarted) return;
            Tone.start();
            synth = new Tone.Synth({ oscillator: { type: 'sine' }, envelope: { attack: 0.01, decay: 0.1, sustain: 0.2, release: 0.2 } }).toDestination();
            successSynth = new Tone.PolySynth(Tone.Synth, { envelope: { attack: 0.01, release: 0.4 } }).toDestination();
            failureSynth = new Tone.Synth({ oscillator: { type: 'fatsawtooth' }, envelope: { attack: 0.01, decay: 0.7, sustain: 0.1, release: 0.2 } }).toDestination();
            failureSynth.volume.value = -6;
            audioStarted = true;
        }
        
        const playSound = {
            click: () => audioStarted && synth.triggerAttackRelease('C5', '8n'),
            success: () => audioStarted && successSynth.triggerAttackRelease(['G5', 'E6'], '8n'),
            failure: () => audioStarted && failureSynth.triggerAttackRelease('C3', '4n')
        };
        
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);

        function showScreen(screenToShow) {
            [welcomeScreen, gameScreen, resultScreen].forEach(screen => {
                screen.classList.add('hidden');
            });
            screenToShow.classList.remove('hidden');
        }

        function startGame() {
            if (!audioStarted) initializeAudio();
            playSound.click();
            showScene('start');
            showScreen(gameScreen);
        }

        function showScene(sceneKey) {
            const scene = gameData.scenes[sceneKey];
            storyText.innerHTML = scene.text;
            choicesContainer.innerHTML = '';

            Object.values(scene.choices).forEach(choice => {
                const button = document.createElement('button');
                button.className = 'choice-btn w-full bg-slate-700 text-white font-bold py-4 px-6 rounded-lg text-lg text-left';
                button.innerHTML = choice.text;
                button.onclick = () => makeChoice(choice);
                choicesContainer.appendChild(button);
            });
        }

        function makeChoice(choice) {
            playSound.click();
            showFeedback(choice.feedback, choice.nextScene);
        }

        function showFeedback(feedback, nextSceneKey) {
            const isSuccess = feedback.type === 'success';
            const isNeutral = feedback.type === 'neutral';
            
            const flashClass = isSuccess ? 'flash-success' : (isNeutral ? '' : 'flash-danger');
            
            if (flashClass) appContainer.classList.add(flashClass);
            if (!isNeutral) playSound[isSuccess ? 'success' : 'failure']();
            
            feedbackIcon.textContent = isSuccess ? 'âœ…' : (isNeutral ? 'ğŸ¤”' : 'âš ï¸');
            feedbackTitle.textContent = feedback.title;
            feedbackText.textContent = feedback.text;
            
            if (isSuccess) feedbackTitle.className = "text-2xl font-bold mb-3 text-green-400";
            else if (isNeutral) feedbackTitle.className = "text-2xl font-bold mb-3 text-cyan-400";
            else feedbackTitle.className = "text-2xl font-bold mb-3 text-rose-400";
            
            feedbackModal.classList.remove('hidden');

            feedbackContinueBtn.onclick = () => {
                playSound.click();
                feedbackModal.classList.add('hidden');
                if (flashClass) appContainer.classList.remove(flashClass);
                
                if (gameData.scenes[nextSceneKey]) {
                    showScene(nextSceneKey);
                } else if (gameData.outcomes[nextSceneKey]) {
                    showOutcome(nextSceneKey);
                }
            };
        }

        function showOutcome(outcomeKey) {
            const outcome = gameData.outcomes[outcomeKey];
            const isSafe = outcomeKey.includes('safe');

            resultIcon.textContent = isSafe ? 'ğŸ†' : 'â˜ ï¸';
            resultTitle.textContent = outcome.title;
            resultContent.innerHTML = outcome.content;
            
            resultTitle.className = `text-4xl font-black mb-4 ${isSafe ? 'text-green-400' : 'text-rose-400'}`;

            showScreen(resultScreen);
        }
    </script>
</body>
</html>

